# EverrichRPG 開發 TODO（免稅店主題，初版）

> 主題：機場免稅店逛街。玩家在航站樓內探索各品牌店面、比較價格與優惠、管理預算與行李容量，並在登機時間前完成購物清單。畫風：像素 2D（類星露谷視角，但玩法改為「購物探索 + 時間/資源管理」）。

## 0. 願景與範圍界定
- [ ] 核心樂趣：探索優惠、聰明比價、完成清單、在時限內達成最優解。
- [ ] 目標玩家：輕中度模擬與收集向玩家；平台：桌面瀏覽器。
- [ ] 首發範圍（MVP）：1 個航站樓走道 + 2 家店（美妝、菸酒）+ 1 個結帳流程 + 倒數登機計時 + 基本錢包/價格/背包容量。
- [ ] 風格基調：明亮乾淨的機場氛圍、看板分割 UI、出發資訊看板風格字體。

## 1. 技術選型與專案腳手架
- [ ] 技術棧：TypeScript、Vite、Phaser 3、ESLint、Prettier。
- [ ] 初始化專案骨架（Vite + TS + Phaser 3）。
- [ ] 目錄結構：
  - [ ] `src/scenes/`（`TerminalScene`、`StoreScene`、`UIOverlay`）
  - [ ] `src/systems/`（`time`、`pricing`、`inventory`、`offers`、`navigation`）
  - [ ] `src/data/`（商品、商店、優惠、活動、在地化）
  - [ ] `assets/`（`tilesets/`、`sprites/`、`audio/`、`fonts/`、`ui/`）
- [ ] 開發品質：ESLint/Prettier 設定，簡單 CI（建置檢查）。

## 2. 美術與資產規範（像素風）
- [ ] 基底圖塊尺寸：16x16（建議；或 32x32），整數縮放（3x/4x）。
- [ ] 航站樓地面/牆面/指示牌 tileset；店面外觀與招牌；收銀台與陳列架。
- [ ] 角色與 NPC：行走 4 向；購物互動（查看、加入購物籃、結帳）。
- [ ] UI 規範：出發資訊看板風格、價格標籤、購物籃/結帳面板、地圖/指引。
- [ ] `image-rendering: pixelated` 與像素對齊避免抖動。

## 3. 核心系統（第一階段：可玩原型）
- [ ] 場景與地圖：
  - [ ] `TerminalScene`：主走道、店門互動進入 `StoreScene`。
  - [ ] 區域碰撞、入口觸發、相機跟隨與邊界。
- [ ] 玩家控制：
  - [ ] 4 向移動、與店面/物件互動（`E`/滑鼠）。
  - [ ] 導航提示（簡易箭頭或地面指示線）。
- [ ] 時間系統：
  - [ ] 遊戲時鐘 + 登機倒數計時（可加速/暫停於選單）。
  - [ ] 廣播事件（整點或特定時段推播：促銷、登機口變更）。
- [ ] 商品與商店：
  - [ ] 最小商品資料（`id`、分類、價格、品牌、限制條件如年齡/件數）。
  - [ ] `StoreScene` 商品瀏覽 UI（分類切換、加入購物籃）。
- [ ] 錢包與購物籃：
  - [ ] 單一貨幣（先簡化為當地幣），預算顯示。
  - [ ] 購物籃容量與玩家行李容量限制（重量/件數其一先實作）。
- [ ] 結帳流程：
  - [ ] 總價、優惠應用、支付、出示收據。
  - [ ] 購買限制檢查（菸酒年齡、免稅數量上限）。

## 4. 價格、優惠與會員（第二階段）
- [ ] 優惠引擎：折扣券、滿額、品牌日、限時閃購；可堆疊規則。
- [ ] 會員系統：等級、積分累積與兌換、會員專屬價。
- [ ] 匯率/稅務：先維持「免稅後定價」，之後加上目的地限制（可選）。

## 5. 店內互動與佇列
- [ ] NPC 與排隊：簡單客流，隊列等待（影響結帳時間）。
- [ ] 試用/展示台：互動產生小增益（例如臨時折扣、情報揭示）。
- [ ] 補貨/缺貨邏輯：基礎庫存（MVP 可忽略或簡化）。

## 6. 事件與目標
- [ ] 事件系統：廣播促銷、臨時閃購、登機口變更、時間緊迫提示。
- [ ] 目標/任務：
  - [ ] 代辦清單（自訂或預設禮品清單）。
  - [ ] 贈禮偏好（NPC 收禮回饋分數，解鎖小獎勵）。
  - [ ] 成就（如：省錢王、準時達人、品牌收藏家）。

## 7. 介面與使用者體驗
- [ ] 主選單、暫停選單、設定（音量、鍵位、縮放）。
- [ ] 地圖與導覽（簡圖/店家清單/篩選）。
- [ ] 登機卡 HUD：航班號、登機口、起飛時間、倒數。
- [ ] 可及性（高對比模式、字體大小、色盲安全）。

## 8. 音效與音樂
- [ ] BGM（機場環境氛圍、店內輕音樂）。
- [ ] SFX（腳步、廣播、UI 點擊、掃碼/結帳音）。
- [ ] 音量分軌（主/BGM/SFX）。

## 9. 存檔/讀檔與資料持久化
- [ ] 存檔格式（JSON）與版本化。
- [ ] IndexedDB（建議；或先用 LocalStorage）。
- [ ] 自動/手動存檔點（離店/結帳/到登機口）。

## 10. 效能與發佈
- [ ] 像素對齊與整數位移，避免抖動。
- [ ] Atlas 打包與延遲載入、預載畫面。
- [ ] 建置（`vite build`）與部署（靜態主機/CDN）。

## 11. 里程碑（建議節奏）
- [ ] M0 原型（1~2 週）：可在航站樓行走，進入 1 家店，瀏覽商品→加入購物籃→結帳，登機倒數 HUD 顯示。
- [ ] M1 玩法成型（2~4 週）：第二家店、優惠套用、容量限制、簡單 NPC 客流與結帳排隊。
- [ ] M2 深化與內容（3~5 週）：多品牌與更多品類、會員/積分、事件系統（閃購/廣播）。
- [ ] M3 打磨與擴充（2~4 週）：UI/UX 優化、音效音樂、地圖導覽、成就與清單豐富化。
- [ ] M4 首發（1~2 週）：修 Bug、效能、部署與頁面宣傳素材。

## 12. 測試與品質
- [ ] 價格/優惠單元測試（資料層邏輯）。
- [ ] 互動冒煙測試清單（行走、進店、加購、結帳、倒數）。
- [ ] 最小錯誤日誌與回報機制。

## 13. 風險與替代方案
- [ ] NPC 群眾與佇列成本高 → 先做假隊列動畫，不做精準 AI 導航。
- [ ] 優惠堆疊規則過複雜 → MVP 僅支援 1~2 類可堆疊規則。
- [ ] 稅務/目的地規則複雜 → 首發維持免稅後定價，之後再細化。

—
備註：待你確認像素規格與技術棧後，我會初始化骨架並提交可跑的最小場景（TerminalScene + StoreScene 雛形）。
